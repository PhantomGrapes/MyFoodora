package policy;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

import item.Item;
import item.Meal;
import item.Offer;
import item.Order;

/**
 * @author Dingo
 * Sort items shipped in orders
 */
public class SortALaCarte implements SortPolicy{
	@Override
	public ArrayList<Offer> shippedOrderSort(ArrayList<Order> orders) {
		ArrayList<Offer> items = new ArrayList<Offer>();
		ArrayList<Item> itemsTemp;
		
		// find all items
		for (Order o : orders) {
			itemsTemp = o.getItemList();
			if(itemsTemp != null && itemsTemp.size()>0){
				for (Item item : itemsTemp) {
					if(!items.contains(item))
						items.add(item);
				}
			}
		}
		
		// sort items
		Collections.sort(items, new Comparator<Offer>() {
			@Override
			public int compare(Offer o1, Offer o2){
				Meal m1 = (Meal) o1;
				Meal m2 = (Meal) o2;
				return m2.getSoldNumber() - m1.getSoldNumber();
			}
		});
		return halfMeals;
	}

}
