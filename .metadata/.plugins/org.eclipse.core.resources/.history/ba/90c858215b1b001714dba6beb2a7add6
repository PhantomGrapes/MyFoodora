package policy;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

import item.Item;
import item.Meal;
import item.Offer;
import item.Order;

/**
 * @author Dingo
 * Sort items shipped in orders
 */
public class SortALaCarte implements SortPolicy{
	@Override
	public ArrayList<Offer> shippedOrderSort(ArrayList<Order> orders) {
		ArrayList<Offer> halfMeals = new ArrayList<Offer>();
		ArrayList<Item> items;
		
		// find all half meals
		for (Order o : orders) {
			items = o.getItemList();
			if(items != null && items.size()>0){
				for (Item item : items) {
					if(!halfMeals.contains(item))
						halfMeals.add(item);
				}
			}
		}
		
		// sort half meals
		Collections.sort(items, new Comparator<Offer>() {
			@Override
			public int compare(Offer o1, Offer o2){
				Meal m1 = (Meal) o1;
				Meal m2 = (Meal) o2;
				return m2.getSoldNumber() - m1.getSoldNumber();
			}
		});
		return halfMeals;
	}

}
